<span class="fs-2">JSON beautifier</span>
<div class="form-floating mt-3 mb-5">
    <textarea class="form-control textarea-big trigger" placeholder="JSON string" id="input"></textarea>
    <label for="input">JSON string</label>
</div>

<button class="btn btn-primary btn-sm toolbox-copy" data-tb-copy-target="#output">Copy</button>
<div class="form-floating mt-2">
    <textarea class="form-control textarea-big trigger" id="output" readonly></textarea>
    <label for="output">Beautified json</label>
</div>

<script>
    Toolbox.registerEvent("#input", "input", update);

    function update() {
        let val = $("#input").val();
        if (val.length == 0) {
            $("#output").removeClass("text-warning");
            $("#output").text("");
            return;
        }

        try {
            let json = JSON.parse(val);
            json = JSON.stringify(json, null, 4);
            
            $("#output").removeClass("text-warning");
            $("#output").text(json);
        } catch (e) {
            $("#output").addClass("text-warning");
            $("#output").text(`Invalid JSON`);
        }
    }
</script>